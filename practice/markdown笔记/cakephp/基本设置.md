cakephp 学习笔记（一）

cakephp最新到3.X版本了，可是中文文档却没有，同时以2.X的版本区别比较好，慢慢看着英文文档学习。
## 下载cakephp
在Github上有，［cakephp]（ https://github.com/cakephp/cakephp),打开终端，因为已经下载了Xcode 所以已经安装了git ，在我自己的电脑，window系统，直接在官网下载安装，安装了git，可以直接打开终端，window可以点击右键打开git。先fork到自己的账号.
	git clone git@github.com:steptobe/cakephp.git
打开如下:![fold](/images/cakephp.png)，对于这个框架的特性等，可以搜索百度百科或者wiki。

## 熟悉基本设置
跟着官网的文档做一个[小书签网站](http://book.cakephp.org/3.0/en/tutorials-and-examples/bookmarks/intro.html)，当全部顺利完成一遍，基本的设置就熟悉了，总结一下步骤：
首先建立自己的服务器，可以用命令：cp  pam  [new server]，进入，改断口等
创建数据库
登录命令行mysql客户端，执行以下SQL语句创建数据库：
	CREATE DATABASE `bookmarks` DEFAULT CHARACTER SET utf8;
在config/app.php 里面databases改为自己的mysql名字
> 'Datasources' => [
        'default' => [
            'className' => 'Cake\Database\Connection',
            'driver' => 'Cake\Database\Driver\Mysql',
            'persistent' => false,
            'host' => '127.0.0.1',
            /**
             * CakePHP will use the default DB port based on the driver selected
             * MySQL on MAMP uses port 8889, MAMP users will want to uncomment
             * the following line and set the port accordingly
             */
            //'port' => 'nonstandard_port_number',
            'username' => 'root',  /*pma.host 数据库的账号*/
            'password' => '123456',/*配置服务器的密码，也可能为空*/
            'database' => 'bookmarks',
            'encoding' => 'utf8',
            'timezone' => 'UTC',
            'cacheMetadata' => true,

在终端执行命令
	$ bin/cake bake [optional] 数据库的table名
optional可以是不同的可以打开
	$ bin/cake bake  --help
比如：官方文档书签网站的命令：
> bin/cake bake all users
bin/cake bake all bookmarks
bin/cake bake all tags 
也可以 bin/cake bake controller tags ，只生成了TagsController.php.
最后根据自己的需要搜索文档，进行设置，如加密功能等。
## 配置cakephp.host 
创建以下虚拟主机配置文件：

	vim /usr/local/etc/nginx/sites-enabled/cakephp.host
输入以下内容后保存：

> server {
  listen    80;
  server_name cakephp.host;

  root    /www/htdocs/cakephp/webroot/;
  index   index.php;

  error_log /usr/local/etc/nginx/logs/cakephp.host.error.log;
  access_log  /usr/local/etc/nginx/logs/cakephp.host.access.log;

  location / {
    try_files $uri \$uri /index.php?$args;
  }

  include   /usr/local/etc/nginx/conf.d/php;
}

配置hosts

执行以下命令添加hosts记录：

	sudo sh -c "echo '127.0.0.1 cakephp.host' >> /etc/hosts"
重启web服务：

	~/scripts/reload.sh
在浏览器输入 cakephp.host 应显示cakephp默认页面,输入cakephp.host/bookmarks,就可以看见自己创的书签网站，页面是默认用cakephp的css。
##简单介绍
控制器 (Controller)，模型 (Model) 及视图 (View) 是 CakePHP 的特色，除此之外它也包含了一些附加的类和对象，使得在 MVC 设计模式下开发更快更有乐趣。组件 (Component)、行为 (Behavior) 及助手 (Helper提供了可扩展性及可重用性来快速新增功能到你的应用中。控制器是 MVC 中的 ‘C’。当经过路由处理，找到正确的控制器之后，就会调用控制器的动 作。控制器用来解释请求数据，使用相应的模型，并渲染相应的响应或视图，通俗地说就是用PHP函数从model里取已经验证的数据，又通过set传递给view视图。控制器可以被 认为是模型和视图之间的中间人。而model就是处理数据，比如table，处理数据库一些字段的限制，格式。而view视图，每一个ctp对应它的控制器，模型，通过cakephp组装的一些方法，从控制器里取数据，动态数据，ctp就是前端页面。

按照文档做一遍，再看看cakephp的简介差不多就算入门了，来公司前都没学过PHP，现在前端后端都学，PHP和框架都是一遍遍的摸索，慢慢看文档，看书。相对于thinkphp，cakephp少人用，中文教程都很少，更不用说新出的版本了，文档只有部分翻译了。把文档全看了一遍大概的功能都了解，在开发的过程中，遇到再查一遍。





